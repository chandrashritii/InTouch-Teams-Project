(this["webpackJsonpInTouch-Teams"]=this["webpackJsonpInTouch-Teams"]||[]).push([[0],{263:function(e,t,n){e.exports=n(473)},39:function(e,t,n){},449:function(e,t){},452:function(e,t,n){},453:function(e,t,n){},473:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),i=n(29),l=(n(268),n(39),n(10)),s=n(32),u=n(507),m=n(506),d=n(8),f=n.n(d),p=n(13),h=n(12),g=n(24),b=n.n(g),v=(n(270),n(272),n(475),n(474),n(274),n(21)),E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),k=function(e){return e?Object.keys(e):[]};function x(e){return e?Object.keys(e).map((function(t){return Object(v.a)(Object(v.a)({},e[t]),{},{id:t})})):[]}var y=function(){var e=Object(p.a)(f.a.mark((function e(t,n,a,r){var c,o,i,l,s,u,m;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c={})["/profiles/".concat(t,"/").concat(n)]=a,o=r.ref("/messages").orderByChild("author/uid").equalTo(t).once("value"),i=r.ref("/rooms").orderByChild("lastMessage/author/uid").equalTo(t).once("value"),e.next=6,Promise.all([o,i]);case 6:return l=e.sent,s=Object(h.a)(l,2),u=s[0],m=s[1],u.forEach((function(e){c["/messages/".concat(e.key,"/author/").concat(n)]=a})),m.forEach((function(e){c["/rooms/".concat(e.key,"/lastMessage/author/").concat(n)]=a})),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();var w=n(510),j=b.a.initializeApp({apiKey:"AIzaSyAsVD_C7K44THRKg1N3z90kWqhIImPuZnA",authDomain:"lastchance-64156.firebaseapp.com",databaseURL:"https://lastchance-64156-default-rtdb.firebaseio.com",projectId:"lastchance-64156",storageBucket:"lastchance-64156.appspot.com",messagingSenderId:"986678897419",appId:"1:986678897419:web:7fad3f6acf86fa0697100e"}),O=j.auth(),N=j.database(),C=j.storage(),S=j.functions("nam5(us-central)"),T=b.a.messaging()?j.messaging():null;T.onMessage((function(e){var t=e.notification,n=t.title,a=t.body;w.a.info({title:n,description:a,duration:0})})),E&&S.useFunctionsEmulator("http://localhost:5001");var I=Object(a.createContext)(),L={state:"offline",last_changed:b.a.database.ServerValue.TIMESTAMP},R={state:"online",last_changed:b.a.database.ServerValue.TIMESTAMP},A=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(h.a)(n,2),o=c[0],i=c[1],l=Object(a.useState)(!0),s=Object(h.a)(l,2),u=s[0],m=s[1];return Object(a.useEffect)((function(){var e,t,n,a=O.onAuthStateChanged(function(){var a=Object(p.a)(f.a.mark((function a(r){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r?(t=N.ref("/status/".concat(r.uid)),console.log(r.uid),e=N.ref("/profiles/".concat(r.uid)),console.log(r),e.on("value",(function(e){console.log("snap",e);var t=e.val(),n={name:t.name,createdAt:t.createdAt,avatar:t.avatar,uid:r.uid,email:r.email};i(n),m(!1)})),N.ref(".info/connected").on("value",(function(e){!1!==!!e.val()&&t.onDisconnect().set(L).then((function(){t.set(R)}))})),T&&(n=T.onTokenRefresh(Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.getToken();case 3:if(!e.sent){e.next=7;break}return e.next=7,N.set(r.uid);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))))):(e&&e.off(),t&&t.off(),n&&n(),N.ref(".info/connected").off(),i(null),m(!1));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());return function(){a(),e&&e.off(),t&&t.off(),n&&n(),N.ref(".info/connected").off()}}),[]),r.a.createElement(I.Provider,{value:{isLoading:u,profile:o}},t)},M=function(){return Object(a.useContext)(I)},B=["children"],D=function(e){var t=e.children,n=Object(s.a)(e,B),a=M(),c=a.profile,o=a.isLoading;return o&&!c?r.a.createElement(u.a,null,r.a.createElement(m.a,{center:!0,vertical:!0,size:"md",content:"Loading",speed:"slow"})):c&&!o?r.a.createElement(l.a,{to:"/"}):r.a.createElement(l.b,n,t)},F=["children"],z=function(e){var t=e.children,n=Object(s.a)(e,F),a=M(),c=a.profile,o=a.isLoading;return o&&!c?r.a.createElement(u.a,null,r.a.createElement(m.a,{center:!0,vertical:!0,size:"md",content:"Loading",speed:"slow"})):c||o?r.a.createElement(l.b,n,t):r.a.createElement(l.a,{to:"/signin"})},U=n(513),V=n(512),_=n(511),H=Object(a.createContext)(),P=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(h.a)(n,2),o=c[0],i=c[1];return Object(a.useEffect)((function(){var e=N.ref("rooms");return e.on("value",(function(e){var t=x(e.val());i(t)})),function(){e.off()}}),[]),r.a.createElement(H.Provider,{value:o},t)},q=function(){return Object(a.useContext)(H)},G=n(117),W=n(517),J=n(120),K=n(114),Y=n(519),Z=["name"],Q=function(e){var t=e.name,n=Object(s.a)(e,Z);return r.a.createElement(Y.a,Object.assign({circle:!0},n),function(e){var t=e.toUpperCase().split(" ");return t.length>1?t[0][0]+t[1][0]:t[0][0]}(t))},X=n(234),$=n(258),ee=n(518);function te(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useState)(e),n=Object(h.a)(t,2),r=n[0],c=n[1],o=Object(a.useCallback)((function(){return c(!0)}),[]),i=Object(a.useCallback)((function(){return c(!1)}),[]);return{isOpen:r,open:o,close:i}}var ne=function(e){var t=Object(a.useState)((function(){return window.matchMedia(e).matches})),n=Object(h.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=window.matchMedia(e);c(t.matches);var n=function(e){return c(e.matches)};return t.addListener(n),function(){return t.removeListener(n)}}),[e]),r};var ae=function(e){if(!e)return"gray";switch(e.state){case"online":return"#66FF00";case"offline":return"#FF033E";default:return"gray"}},re=function(e){return e?"online"===e.state?"Online":"Last online ".concat(new Date(e.last_changed).toLocaleDateString()," "):"Unknown state"},ce=function(e){var t=function(e){var t=Object(a.useState)(null),n=Object(h.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=N.ref("/status/".concat(e));return t.on("value",(function(e){if(e.exists()){var t=e.val();c(t)}})),function(){t.off()}}),[e]),r}(e.uid);return r.a.createElement(X.a,{placement:"top",trigger:"hover",speaker:r.a.createElement($.a,null,re(t))},r.a.createElement(ee.a,{className:"cursor-pointer",style:{backgroundColor:ae(t)}}))},oe=n(495),ie=["profile","children"],le=function(e){var t=e.profile,n=e.children,a=Object(s.a)(e,ie),c=te(),o=c.isOpen,i=c.close,l=c.open,u=t.name.split(" ")[0],m=t.name,d=t.avatar,f=t.createdAt,p=new Date(f).toLocaleDateString();return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,Object.assign({onClick:l},a),u),r.a.createElement(oe.a,{show:o,onHide:i},r.a.createElement(oe.a.Header,null,r.a.createElement(oe.a.Title,null,u," profile")),r.a.createElement(oe.a.Body,{className:"text-center"},r.a.createElement(Q,{src:d,name:m,className:"widthtwo heighttwo bigsize font-huge"}),r.a.createElement("h4",{className:"mt-2"},m),r.a.createElement("p",null,"Member since ",p)),r.a.createElement(oe.a.Footer,null,n,r.a.createElement(J.a,{block:!0,onClick:i},"Close"))))},se=n(163),ue=Object(se.a)(),me=function(e){var t=e.children,n=e.data;return r.a.createElement(ue.Provider,{value:n},t)},de=function(e){return Object(se.b)(ue,e)},fe=n(256),pe=n(75),he=n(257),ge=["isVisible","iconName","tooltip","onClick","badgeContent"],be=function(e){var t=e.condition,n=e.children;return t?r.a.createElement(ee.a,{content:t},n):n},ve=function(e){var t=e.src,n=e.fileName,a=te(),c=a.isOpen,o=a.open,i=a.close;return r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{type:"image",alt:"file",src:t,onClick:o,className:"mwhundred mhhundred",style:{width:"auto"}}),r.a.createElement(oe.a,{show:c,onHide:i},r.a.createElement(oe.a.Header,null,r.a.createElement(oe.a.Title,null,n)),r.a.createElement(oe.a.Body,null,r.a.createElement("div",null,r.a.createElement("img",{src:t,height:"100%",width:"100%",alt:"file"}))),r.a.createElement(oe.a.Footer,null,r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},"Download from Source"))))},Ee=function(e){var t=e.isVisible,n=e.iconName,a=e.tooltip,c=e.onClick,o=e.badgeContent,i=Object(s.a)(e,ge);return r.a.createElement("div",{className:"ml-2",style:{visibility:t?"visible":"hidden"}},r.a.createElement(be,{condition:o},r.a.createElement(X.a,{placement:"top",delay:0,delayHide:0,delayShow:0,trigger:"hover",speaker:r.a.createElement($.a,null,a)},r.a.createElement(fe.a,Object.assign({},i,{onClick:c,circle:!0,size:"xs",icon:r.a.createElement(pe.a,{icon:n})})))))},ke=Object(a.memo)((function(e){var t=e.message,n=e.handleAdmin,c=e.handleLike,o=e.handleDelete,i=t.author,l=t.createdAt,s=t.text,u=t.file,m=t.likes,d=(t.hearts,t.likeCount),f=(t.heartCount,function(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)(null),o=function(){return r(!0)},i=function(){return r(!1)};return Object(a.useEffect)((function(){var e=c.current;return e&&(e.addEventListener("mouseover",o),e.addEventListener("mouseout",i)),function(){e.removeEventListener("mouseover",o),e.removeEventListener("mouseout",i)}}),[c.current]),[c,n]}()),p=Object(h.a)(f,2),g=p[0],b=p[1],v=ne("(max-width: 992px)"),E=de((function(e){return e.isAdmin})),k=de((function(e){return e.admins})).includes(i.uid),x=O.currentUser.uid===i.uid,y=E&&!x,w=m&&Object.keys(m).includes(O.currentUser.uid),j=v||b;return r.a.createElement("li",{className:"padded mb-1 cursor-pointer ".concat(b?"bg-black-02":""),ref:g},r.a.createElement("div",{className:"displayflex align-items-center font-bolder mb-1"},r.a.createElement(ce,{uid:i.uid}),r.a.createElement(Q,{src:i.avatar,name:i.name,className:"ml-1",size:"xs"}),r.a.createElement(le,{profile:i,appearance:"link",className:"p-0 ml-1 text-white"},y&&r.a.createElement(J.a,{block:!0,onClick:function(){return n(i.uid)},color:"blue"},k?"Remove admin permission":"Give admin permission")),r.a.createElement(K.a,{datetime:l,className:"font-normal text-grey-40 ml-2"}),r.a.createElement(Ee,Object.assign({},w?{color:"red"}:{},{isVisible:j,iconName:"heart",tooltip:"Heart this message",onClick:function(){return c(t.id)},badgeContent:d})),x&&r.a.createElement(Ee,{isVisible:j,iconName:"close",tooltip:"Delete this message",onClick:function(){return o(t.id,u)}})),r.a.createElement("div",null,s&&r.a.createElement("span",{className:"break"},s)," ",u&&function(e){return e.contentType.includes("image")?r.a.createElement("div",{className:"heighttwenty"},r.a.createElement(ve,{src:e.url,fileName:e.name})):e.contentType.includes("audio")?r.a.createElement("audio",{controls:!0},r.a.createElement("source",{src:e.url,type:"audio/mp3"}),"Your browser does not support audio"):r.a.createElement("a",{href:e.url},"Download ",e.name)}(u)))})),xe=N.ref("/messages");var ye,we,je=function(){var e=Object(l.i)().chatId,t=Object(a.useState)(null),n=Object(h.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(13),s=Object(h.a)(i,2),u=s[0],m=s[1],d=Object(a.useRef)(),g=c&&0===c.length,b=c&&c.length>0,E=Object(a.useCallback)((function(t){var n=d.current;xe.off(),xe.orderByChild("roomId").equalTo(e).limitToLast(t||13).on("value",(function(e){var t=x(e.val());o(t),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=100*e.scrollTop/(e.scrollHeight-e.clientHeight)||0;return n>t}(n)&&(n.scrollTop=n.scrollHeight)})),m((function(e){return e+13}))}),[e]),k=Object(a.useCallback)((function(){var e=d.current,t=e.scrollHeight;E(u),setTimeout((function(){var n=e.scrollHeight;e.scrollTop=n-t}),200)}),[E,u]);Object(a.useEffect)((function(){var e=d.current;return E(),setTimeout((function(){e.scrollTop=e.scrollHeight}),200),function(){xe.off("value")}}),[E]);var y=Object(a.useCallback)(function(){var t=Object(p.a)(f.a.mark((function t(n,a){var r,o,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure you want to delete this message?")){t.next=2;break}return t.abrupt("return");case 2:return r=c[c.length-1].id===n,(o={})["/messages/".concat(n)]=null,r&&c.length>1&&(o["/rooms/".concat(e,"/lastMessage")]=Object(v.a)(Object(v.a)({},c[c.length-2]),{},{msgId:c[c.length-2].id})),r&&1===c.length&&(o["/rooms/".concat(e,"/lastMessage")]=null),t.prev=7,t.next=10,N.ref().update(o);case 10:W.a.info("Message has been deleted"),t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(7),t.abrupt("return",W.a.error(t.t0.message,4e3));case 16:if(!a){t.next=26;break}return t.prev=17,i=C.refFromURL(a.url),t.next=21,i.delete();case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(17),W.a.error(t.t1.message,4e3);case 26:case"end":return t.stop()}}),t,null,[[7,13],[17,23]])})));return function(e,n){return t.apply(this,arguments)}}(),[e,c]),w=Object(a.useCallback)(function(){var t=Object(p.a)(f.a.mark((function t(n){var a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=N.ref("/rooms/".concat(e,"/admins")),t.next=3,a.transaction((function(e){return e&&(e[n]?(e[n]=null,r="Admin permission removed"):(e[n]=!0,r="Admin permission granted")),e}));case 3:W.a.info(r,4e3);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),j=Object(a.useCallback)(function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.currentUser.uid,a=N.ref("/messages/".concat(t)),e.next=4,a.transaction((function(e){return e&&(e.likes&&e.likes[n]?(e.likeCount-=1,e.likes[n]=null,r="Like removed"):(e.likeCount+=1,e.likes||(e.likes={}),e.likes[n]=!0,r="Like added")),e}));case 4:W.a.info(r,4e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return r.a.createElement("ul",{ref:d,className:"indexlist scroll"},c&&c.length>=13&&r.a.createElement("li",{className:"text-center mt-2 mb-2"},r.a.createElement("button",{onClick:k,className:"widget"},"Load More")),g&&r.a.createElement("div",{style:{marginLeft:"40%",marginTop:"20%",fontSize:"16px"}},r.a.createElement("li",null,"Start a conversation")),b&&function(){var e,t=(e=function(e){return new Date(e.createdAt).toDateString()},c.reduce((function(t,n){var a=e(n);return t[a]||(t[a]=[]),t[a].push(n),t}),{})),n=[];return Object.keys(t).forEach((function(e){n.push(r.a.createElement("li",{key:e,className:"text-center mb-1 padded"},e));var a=t[e].map((function(e){return r.a.createElement(ke,{key:e.id,message:e,handleAdmin:w,handleLike:j,handleDelete:y})}));n.push.apply(n,Object(G.a)(a))})),n}())},Oe=Object(a.memo)((function(){de((function(e){return e.name})),de((function(e){return e.isAdmin}));var e=ne("(max-width: 992px)");return r.a.createElement("div",null,r.a.createElement("div",{className:"displayflex justify-content-end align-items-center"},r.a.createElement("h4",{className:"text-disappear-2 displayflex align-items-center"},r.a.createElement(pe.a,{componentClass:i.b,to:"/",icon:"arrow-circle-left",size:"2x",className:e?"displayinline-block p-0 mr-2 text-blue link-unstyled":"display1"})),r.a.createElement("h5",{className:"text-center",style:{fontSize:"25px",textAlign:"center",marginRight:"43%"}},"CHAT")),r.a.createElement("div",{className:"displayflex justify-content-between align-items-center shiftup"}))})),Ne=n(496),Ce=n(502),Se=n(499),Te=function(e){var t=e.afterUpload,n=Object(l.i)().chatId,c=te(),o=c.isOpen,i=c.open,s=c.close,u=Object(a.useState)(!1),m=Object(h.a)(u,2),d=m[0],g=m[1],b=Object(a.useState)([]),v=Object(h.a)(b,2),E=v[0],k=v[1],x=function(){var e=Object(p.a)(f.a.mark((function e(){var a,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=E.map((function(e){return C.ref("/chat/".concat(n)).child(Date.now()+e.name).put(e.blobFile,{cacheControl:"public, max-age=".concat(259200)})})),e.next=4,Promise.all(a);case 4:return r=e.sent,c=r.map(function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.metadata.contentType,e.t1=t.metadata.name,e.next=4,t.ref.getDownloadURL();case 4:return e.t2=e.sent,e.abrupt("return",{contentType:e.t0,name:e.t1,url:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,Promise.all(c);case 8:return o=e.sent,e.next=11,t(o);case 11:g(!1),s(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),g(!1),W.a.error(e.t0.message,4e3);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.a,{title:"Send Files",placement:"top"},r.a.createElement(Ne.a.Button,{onClick:i,style:{backgroundColor:"white"}},r.a.createElement(pe.a,{icon:"attachment"}))),r.a.createElement(oe.a,{show:o,onHide:s},r.a.createElement(oe.a.Header,null,r.a.createElement(oe.a.Title,null,"Upload Files")),r.a.createElement(oe.a.Body,null,r.a.createElement(Ce.a,{autoUpload:!1,action:"",fileList:E,onChange:function(e){var t=e.filter((function(e){return e.blobFile.size<=512e4})).slice(0,5);k(t)},multiple:!0,listType:"picture-text",className:"weighthundred",disabled:d})),r.a.createElement(oe.a.Footer,null,r.a.createElement(J.a,{block:!0,disabled:d,onClick:x}," ","Send to chat"),r.a.createElement("div",{className:"text-right mt-2"},r.a.createElement("small",null,"* Files must be less than 5 mb.")))))},Ie=n(238),Le=function(e){var t=e.afterUpload,n=Object(l.i)().chatId,c=Object(a.useState)(!1),o=Object(h.a)(c,2),i=o[0],s=o[1],u=Object(a.useState)(!1),m=Object(h.a)(u,2),d=m[0],g=m[1],b=Object(a.useCallback)((function(){s((function(e){return!e}))}),[]),v=Object(a.useCallback)(function(){var e=Object(p.a)(f.a.mark((function e(a){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,C.ref("/chat/".concat(n)).child("audio_".concat(Date.now(),".mp3")).put(a.blob,{cacheControl:"public, max-age=".concat(259200)});case 4:return r=e.sent,e.t0=r.metadata.contentType,e.t1=r.metadata.name,e.next=9,r.ref.getDownloadURL();case 9:e.t2=e.sent,c={contentType:e.t0,name:e.t1,url:e.t2},g(!1),t([c]),e.next=19;break;case 15:e.prev=15,e.t3=e.catch(1),g(!1),W.a.error(e.t3.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),[t,n]);return r.a.createElement(Se.a,{title:"Record Audio",placement:"top"},r.a.createElement(Ne.a.Button,{onClick:b,disabled:d,className:i?"blink":"",style:{backgroundColor:"white"}},r.a.createElement(pe.a,{icon:"microphone"}),r.a.createElement(Ie.ReactMic,{record:i,className:"display1",onStop:v,mimeType:"audio/mp3"})))},Re=n(90),Ae=n(91),Me=n(239),Be=n.n(Me),De=Ae.a.div(ye||(ye=Object(Re.a)(["\noverflow-y: auto;\nmargin-left: 25px;\nposition: relative;\nwidth: 300px;\n"]))),Fe=Object(Ae.a)(Be.a)(we||(we=Object(Re.a)(["\nposition: top;\n"]))),ze=function(e){var t=e.pickEmoji;return r.a.createElement(De,null,r.a.createElement(Fe,{onEmojiClick:t}))},Ue=n(27),Ve=Object(a.memo)((function(){var e=te(),t=e.isOpen,n=e.open,a=e.close,c=de((function(e){return e.description})),o=de((function(e){return e.name}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.a,{title:"Room Information",placement:"top"},r.a.createElement("button",Object(Ue.a)({style:{borderRadius:"0px",size:"3em",padding:"5px 3px",paddingLeft:"16px",paddingRight:"6px",backgroundColor:"white"},onClick:n},"style",{color:"black",backgroundColor:"white"}),r.a.createElement(pe.a,{icon:"info-circle"}))),r.a.createElement(oe.a,{show:t,onHide:a},r.a.createElement(oe.a.Header,null,r.a.createElement(oe.a.Title,null,"About ",o)),r.a.createElement(oe.a.Body,null,r.a.createElement("h5",{className:"mb-1"},"Description"),r.a.createElement("p",null,c)),r.a.createElement(oe.a.Footer,null,r.a.createElement(J.a,{onClick:a,className:"block-room"},"Close"))))}));function _e(e,t){return{roomId:t,author:Object(v.a)({name:e.name,uid:e.uid,createdAt:e.createdAt},e.avatar?{avatar:e.avatar}:{}),createdAt:b.a.database.ServerValue.TIMESTAMP,likeCount:0}}var He=function(){var e=Object(a.useState)(""),t=Object(h.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(h.a)(o,2),s=i[0],u=i[1],m=M().profile,d=Object(l.i)().chatId,g=Object(a.useCallback)((function(e){c(e)}),[]),b=function(){var e=Object(p.a)(f.a.mark((function e(){var t,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.trim()){e.next=2;break}return e.abrupt("return");case 2:return(t=_e(m,d)).text=n,a={},r=N.ref("messages").push().key,a["/messages/".concat(r)]=t,a["/rooms/".concat(d,"/lastMessage")]=Object(v.a)(Object(v.a)({},t),{},{msgId:r}),u(!0),e.prev=9,e.next=12,N.ref().update(a);case 12:c(""),u(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(9),u(!1),W.a.error(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(){return e.apply(this,arguments)}}(),E=Object(a.useCallback)(function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),n={},t.forEach((function(e){var t=_e(m,d);t.file=e;var a=N.ref("messages").push().key;n["/messages/".concat(a)]=t})),a=Object.keys(n).pop(),n["/rooms/".concat(d,"/lastMessage")]=Object(v.a)(Object(v.a)({},n[a]),{},{msgId:a}),e.prev=5,e.next=8,N.ref().update(n);case 8:u(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),u(!1),W.a.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),[d,m]),k=Object(a.createRef)(),x=Object(a.useState)(),y=Object(h.a)(x,2),w=y[0],j=y[1],O=Object(a.useState)(),C=Object(h.a)(O,2),S=C[0],T=C[1];return Object(a.useEffect)((function(){k.current.selectionEnd=S}),[S]),r.a.createElement("div",null,r.a.createElement(Ne.a,{style:{border:"0px"},className:"input-width"},r.a.createElement(Ve,null),r.a.createElement(Le,{afterUpload:E}),r.a.createElement(Te,{afterUpload:E}),r.a.createElement("div",{className:"emoji-list ".concat(!w&&"hidden")},r.a.createElement(ze,{pickEmoji:function(e,t){var a=t.emoji,r=k.current,o=n.substring(0,r.selectionStart);n.substring(r.selectionStart);c(o+a),T(o.length+a.length)}})),r.a.createElement("div",{id:"mytext"},r.a.createElement("button",{className:"emoji-icon",onClick:function(){j(!w)}}," ",r.a.createElement(pe.a,{icon:"smile-o",style:{color:"black"}}))),r.a.createElement(he.a,{placeholder:"Get creative",value:n,ref:k,onChange:g,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),b())},style:{color:"black"}}),r.a.createElement(Ne.a.Button,{color:"blue",backgroundColor:"#2b4a69",onClick:b,disabled:s},r.a.createElement(pe.a,{icon:"send"}))))},Pe=function(){var e=Object(l.i)().chatId,t=q(),n=M(),a=n.profile,c=(n.isLoading,Object(l.g)().push);if(!t)return r.a.createElement(m.a,{center:!0,vertical:!0,size:"md",content:"Loading",speed:"slow"});var o=t.find((function(t){return t.id===e}));if(!a)return r.a.createElement("h5",{className:"mt-page"},"Chat is not available in Guest mode ",r.a.createElement("br",null),"Login to access all features ",r.a.createElement("br",null),r.a.createElement("button",{className:"block-nav-2",variant:"danger",onClick:function(){return c("/signin")},style:{width:"68%",marginTop:"15px",marginRight:"30px"}}," Authenticate "));if(!o)return r.a.createElement("h5",{className:"text-right mt-page"},"Join a room to chat");var i=o.name,s=o.description,u=k(o.admins),d=u.includes(O.currentUser.uid),f={name:i,description:s,admins:u,isAdmin:d};return r.a.createElement(me,{data:f},r.a.createElement("div",{className:"chatnav"},r.a.createElement(Oe,null)),r.a.createElement("div",{className:"chatarea bg"},r.a.createElement(je,null)),r.a.createElement("div",{className:"chatfooter bg"},r.a.createElement(He,null)))},qe=n(500),Ge=function(e){var t=e.children;return a.createElement(qe.a,{className:"justify-content-between bg-app",expand:"lg",sticky:"top",variant:"light"},a.createElement(qe.a.Brand,{href:"/"}),t||null)},We=n(126),Je=n.n(We),Ke=n(245);Je()().format();var Ye={generateRandomString:function(){return Math.random().toString(36).slice(2).substring(0,15)},closeVideo:function(e){document.getElementById(e)&&(document.getElementById(e).remove(),this.adjustVideoElemSize())},pageHasFocus:function(){return!(document.hidden||document.onfocusout||window.onpagehide||window.onblur)},getQString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e=e||window.location.href;var n=decodeURIComponent(e).split("#",2)[0].split("?",2)[1];if(n){var a=n.split("&");if(a.length){var r={};return a.forEach((function(e){var t=e.split("=",2);t.length&&(r[t[0]]=t[1])})),t?r[t]?r[t]:null:r}return null}return null},userMediaAvailable:function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},getUserFullMedia:function(){if(this.userMediaAvailable())return navigator.mediaDevices.getUserMedia({video:!0,audio:{echoCancellation:!0,noiseSuppression:!0}});throw new Error("User media not available")},getUserAudio:function(){if(this.userMediaAvailable())return navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0}});throw new Error("User media not available")},shareScreen:function(){if(this.userMediaAvailable())return navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});throw new Error("User media not available")},getIceServer:function(){return{iceServers:[{urls:["stun:ss-turn1.xirsys.com"]},{username:"R44mgQPZ_HZxSXJbZRehQBjU_2rWIdq546HmpK958l_XrAj5rkK8e6Lt6_ssD8ULAAAAAF7kVy5zdW1pdGM=",credential:"14807cf8-ad2f-11ea-8c40-0242ac140004",urls:["turn:ss-turn1.xirsys.com:80?transport=udp","turn:ss-turn1.xirsys.com:3478?transport=udp","turn:ss-turn1.xirsys.com:80?transport=tcp","turn:ss-turn1.xirsys.com:3478?transport=tcp","turns:ss-turn1.xirsys.com:443?transport=tcp","turns:ss-turn1.xirsys.com:5349?transport=tcp"]}]}},addChat:function(e,t){var n=document.querySelector("#chat-messages"),a="justify-content-end",r="You",c="bg-white";"remote"===t&&(a="justify-content-start",r=e.sender,c="",this.toggleChatNotificationBadge());var o=document.createElement("div");o.className="sender-info",o.innerHTML="".concat(r," - ").concat(Je()().format("Do MMMM, YYYY h:mm a"));var i=document.createElement("div");i.className="col-10 card chat-card msg ".concat(c),i.innerHTML=e.msg;var l=document.createElement("div");l.className="row ".concat(a," mb-2"),i.appendChild(o),l.appendChild(i),n.appendChild(l),this.pageHasFocus&&l.scrollIntoView()},toggleChatNotificationBadge:function(){document.querySelector("#chatarea").classList.contains("openchat")?document.querySelector("#new-chat-notification").setAttribute("hidden",!0):document.querySelector("#new-chat-notification").removeAttribute("hidden")},replaceTrack:function(e,t){var n=!!t.getSenders&&t.getSenders().find((function(t){return t.track&&t.track.kind===e.kind}));return n?n.replaceTrack(e):""},toggleShareIcons:function(e){var t=document.querySelector("#share-screen");e?(t.setAttribute("title","Stop sharing screen"),t.children[0].classList.add("text-primary"),t.children[0].classList.remove("text-app")):(t.setAttribute("title","Share screen"),t.children[0].classList.add("text-app"),t.children[0].classList.remove("text-primary"))},toggleVideoBtnDisabled:function(e){document.getElementById("toggle-video").disabled=e},maximiseStream:function(e){var t=e.target.parentElement.previousElementSibling;t.requestFullscreen()||t.mozRequestFullScreen()||t.webkitRequestFullscreen()||t.msRequestFullscreen()},singleStreamToggleMute:function(e){e.target.classList.contains("fa-microphone")?(e.target.parentElement.previousElementSibling.muted=!0,e.target.classList.add("fa-microphone-slash"),e.target.classList.remove("fa-microphone")):(e.target.parentElement.previousElementSibling.muted=!1,e.target.classList.add("fa-microphone"),e.target.classList.remove("fa-microphone-slash"))},saveRecordedStream:function(e,t){var n=new Blob(e,{type:"video/webm"}),a=new File([n],"".concat(t,"-").concat(Je()().unix(),"-record.webm"));Object(Ke.saveAs)(a)},toggleModal:function(e,t){var n=document.getElementById(e);t?(n.style.display="block",n.removeAttribute("aria-hidden")):(n.style.display="none",n.setAttribute("aria-hidden",!0))},setLocalStream:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=document.getElementById("localuser");n.srcObject=e,t?n.classList.add("mirror-mode"):n.classList.remove("mirror-mode")},adjustVideoElemSize:function(){for(var e=document.getElementsByClassName("card"),t=e.length,n=t<=2?"50%":3==t?"33.33%":t<=8?"25%":t<=15?"20%":t<=18?"16%":t<=23?"15%":t<=32?"12%":"10%",a=0;a<t;a++)e[a].style.width=n,e[a].style.maxWidth="500px"},createDemoRemotes:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=0,r=setInterval((function(){var c=document.createElement("video");c.id="demo-".concat(a,"-video"),c.srcObject=e,c.autoplay=!0,c.className="remote-video";var o=document.createElement("div");o.className="remote-video-controls",o.innerHTML='<i class="fa fa-microphone text-app pr-3 mute-remote-mic" title="Mute"></i>';var i=document.createElement("div");i.className="card card-sm",i.id="demo-".concat(a),i.appendChild(c),i.appendChild(o),document.getElementById("videos").appendChild(i),t.adjustVideoElemSize(),++a==n&&clearInterval(r)}),2e3)}},Ze=n(246),Qe=[],Xe=n.n(Ze)()("/stream"),$e="",et="",tt="",nt=[],at="",rt=function(e){for(var t=e,n=document.getElementsByClassName("room-comm"),a=sessionStorage.getItem("username"),r=0;r<n.length;r++)n[r].attributes.removeNamedItem("hidden");function c(e,t){Qe[t]=new RTCPeerConnection(Ye.getIceServer()),tt&&tt.getTracks().length?tt.getTracks().forEach((function(e){Qe[t].addTrack(e,tt)})):$e?$e.getTracks().forEach((function(e){Qe[t].addTrack(e,$e)})):Ye.getUserFullMedia().then((function(e){$e=e,e.getTracks().forEach((function(n){Qe[t].addTrack(n,e)})),Ye.setLocalStream(e)})).catch((function(e){console.error("stream error: ".concat(e))})),e&&(Qe[t].onnegotiationneeded=Object(p.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe[t].createOffer();case 2:return n=e.sent,e.next=5,Qe[t].setLocalDescription(n);case 5:Xe.emit("dataOffer",{description:Qe[t].localDescription,to:t,sender:et});case 6:case"end":return e.stop()}}),e)})))),Qe[t].onicecandidate=function(e){var n=e.candidate;Xe.emit("icecandidates",{candidate:n,to:t,sender:et})},Qe[t].ontrack=function(e){var n=e.streams[0];if(document.getElementById("".concat(t,"-video")))document.getElementById("".concat(t,"-video")).srcObject=n;else{var a=document.createElement("video");a.id="".concat(t,"-video"),a.srcObject=n,a.autoplay=!0,a.className="remote-video";var r=document.createElement("div");r.className="remote-video-controls",r.innerHTML='<i class="fa fa-microphone text-app pr-3 mute-remote-mic" title="Mute"></i>';var c=document.createElement("div");c.className="card card-sm",c.id=t,c.appendChild(a),c.appendChild(r),document.getElementById("videos").appendChild(c),Ye.adjustVideoElemSize()}},Qe[t].onconnectionstatechange=function(e){switch(Qe[t].iceConnectionState){case"disconnected":case"failed":case"closed":Ye.closeVideo(t)}},Qe[t].onsignalingstatechange=function(e){switch(Qe[t].signalingState){case"closed":console.log("Signalling state has 'exited'"),Ye.closeVideo(t)}}}function o(){return Ye.toggleVideoBtnDisabled(!1),new Promise((function(e,t){tt.getTracks().length&&tt.getTracks().forEach((function(e){return e.stop()}));e()})).then((function(){Ye.toggleShareIcons(!1),i($e,"video")})).catch((function(e){console.error(e)}))}function i(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ye.setLocalStream(e,n);var a="audio"==t?e.getAudioTracks()[0]:e.getVideoTracks()[0];for(var r in Qe){var c=Qe[r];"object"==typeof Qe[c]&&Ye.replaceTrack(a,Qe[c])}}Ye.getUserFullMedia().then((function(e){$e=e,Ye.setLocalStream(e)})).catch((function(e){console.error("stream error: ".concat(e))})),Xe.on("connect",(function(){et=Xe.io.engine.id,Xe.emit("subscribe",{room:t,socketIdentity:et}),Xe.on("new user",(function(e){Xe.emit("newuser",{to:e.socketIdentity,sender:et}),Qe.push(e.socketIdentity),c(!0,e.socketIdentity)})),Xe.on("newuser",(function(e){Qe.push(e.sender),c(!1,e.sender)})),Xe.on("icecandidates",function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.candidate){e.next=6;break}return e.next=3,Qe[t.sender].addIceCandidate(new RTCIceCandidate(t.candidate));case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0="";case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Xe.on("dataOffer",function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("offer"!==t.description.type){e.next=12;break}if(!t.description){e.next=7;break}return e.next=4,Qe[t.sender].setRemoteDescription(new RTCSessionDescription(t.description));case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0="";case 8:e.t0,Ye.getUserFullMedia().then(function(){var e=Object(p.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("localuser").srcObject||Ye.setLocalStream(n),$e=n,n.getTracks().forEach((function(e){Qe[t.sender].addTrack(e,n)})),e.next=5,Qe[t.sender].createAnswer();case 5:return a=e.sent,e.next=8,Qe[t.sender].setLocalDescription(a);case 8:Xe.emit("dataOffer",{description:Qe[t.sender].localDescription,to:t.sender,sender:et});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e)})),e.next=15;break;case 12:if("answer"!==t.description.type){e.next=15;break}return e.next=15,Qe[t.sender].setRemoteDescription(new RTCSessionDescription(t.description));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Xe.on("securechat",(function(e){Ye.addChat(e,"remote")}))})),document.getElementById("chat-input").addEventListener("keypress",(function(e){13===e.which&&e.target.value.trim()&&(e.preventDefault(),function(e){var n={room:t,msg:e,sender:a};Xe.emit("securechat",n),Ye.addChat(n,"localuser")}(e.target.value),setTimeout((function(){e.target.value=""}),50))})),document.getElementById("toggle-video").addEventListener("click",(function(e){e.preventDefault();var t=document.getElementById("toggle-video");$e.getVideoTracks()[0].enabled?(e.target.classList.remove("fa-video"),e.target.classList.add("fa-video-slash"),t.setAttribute("title","Show Video"),$e.getVideoTracks()[0].enabled=!1):(e.target.classList.remove("fa-video-slash"),e.target.classList.add("fa-video"),t.setAttribute("title","Hide Video"),$e.getVideoTracks()[0].enabled=!0),i($e,"video")})),document.getElementById("toggle-mute").addEventListener("click",(function(e){e.preventDefault();var t=document.getElementById("toggle-mute");$e.getAudioTracks()[0].enabled?(e.target.classList.remove("fa-microphone-alt"),e.target.classList.add("fa-microphone-alt-slash"),t.setAttribute("title","Unmute"),$e.getAudioTracks()[0].enabled=!1):(e.target.classList.remove("fa-microphone-alt-slash"),e.target.classList.add("fa-microphone-alt"),t.setAttribute("title","Mute"),$e.getAudioTracks()[0].enabled=!0),i($e,"audio")})),document.getElementById("share-screen").addEventListener("click",(function(e){e.preventDefault(),tt&&tt.getVideoTracks().length&&"ended"!=tt.getVideoTracks()[0].readyState?o():Ye.shareScreen().then((function(e){Ye.toggleShareIcons(!0),Ye.toggleVideoBtnDisabled(!0),tt=e,i(e,"video",!1),tt.getVideoTracks()[0].addEventListener("ended",(function(){o()}))})).catch((function(e){console.error(e)}))}))},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"screen";if(!at||"inactive"==at.state)return"screen"===e?it():lt();"paused"==at.state?at.resume():"recording"==at.state&&at.stop()};function ot(e){var t=sessionStorage.getItem("username");(at=new MediaRecorder(e,{mimeType:"video/webm;codecs=vp9"})).start(1e3),at.ondataavailable=function(e){nt.push(e.data)},at.onstop=function(){Ye.saveRecordedStream(nt,t),setTimeout((function(){nt=[]}),3e3)},at.onerror=function(e){console.error(e)}}var it=function(){return tt&&tt.getVideoTracks().length?(ot(tt),!0):Ye.shareScreen().then((function(e){return ot(e),!0})).catch((function(){return!1}))},lt=function(){if($e&&$e.getTracks().length)return ot($e),!0;Ye.getUserFullMedia().then((function(e){return ot(e),!0})).catch((function(){return!1}))};n(452);function st(e){return r.a.createElement("nav",{className:"col-4 col-md-4 col-xs-12 offset-md-5 fixed-bottom rounded-0 stream-actions",style:{zIndex:999}},r.a.createElement("div",{className:"pull-right room-comm navalign",hidden:!0},r.a.createElement(Se.a,{title:"Toggle Video",placement:"bottom"},r.a.createElement("button",{className:"block-nav-2 btn-no-effect mr-3 mb-4",id:"toggle-video",title:"Hide Video"},r.a.createElement("i",{className:"fa fa-video fa-1x text-app"}))),r.a.createElement(Se.a,{title:"Toggle Audio",placement:"bottom"},r.a.createElement("button",{className:"block-nav-2 btn-no-effect mr-3 mb-4",id:"toggle-mute",title:"Mute"},r.a.createElement("i",{className:"fa fa-microphone-alt fa-1x text-app"}))),r.a.createElement(Se.a,{title:"Share Screen",placement:"bottom"},r.a.createElement("button",{className:"block-nav-2 btn-no-effect mr-3 mb-4",id:"share-screen",title:"Share screen"},r.a.createElement("i",{className:"fa fa-desktop fa-1x text-app"}))),r.a.createElement(Se.a,{title:"Chat",placement:"bottom"},r.a.createElement("button",{style:{width:"25%"},className:"block-nav-2 col-md-9 text-app pull-right btn-no-effect mr-3 mb-4",id:"chattoggle"},r.a.createElement("i",{className:"fa fa-comment fa-1x"})," ",r.a.createElement("span",{className:"badge badge-danger very-small font-weight-lighter",id:"new-chat-notification",hidden:!0},"New")))))}var ut,mt=function(){return r.a.createElement("div",{className:"custom-modal",id:"recording-modal",style:{display:"none"}},r.a.createElement("div",{className:"custom-modal-content"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-md-6 mb-2"},r.a.createElement("span",{className:"record-option",id:"record-video"},"Record video")),r.a.createElement("div",{className:"col-md-6 mb-2"},r.a.createElement("span",{className:"record-option",id:"record-screen"},"Record screen"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("button",{className:"btn btn-outline-danger",id:"closerecording"},"Close")))))},dt=(n(453),n(53)),ft=n.n(dt),pt=function(){var e=M().profile,t=(a.useState("").roomLink,Object(l.i)()),n=t.meetingId,r=t.chatId,c=Object(a.useState)(!1),o=Object(h.a)(c,2),i=o[0],s=o[1],u=Object(l.g)().push;Object(a.useEffect)((function(){document.querySelector("#chattoggle").addEventListener("click",(function(e){var t=document.querySelector("#chatarea");document.querySelector("#master"),t.classList.contains("openchat")?(t.setAttribute("hidden",!0),t.classList.remove("openchat")):(t.attributes.removeNamedItem("hidden"),t.classList.add("openchat")),setTimeout((function(){document.querySelector("#chatarea").classList.contains("openchat")&&Ye.toggleChatNotificationBadge()}),300)})),document.getElementById("localuser").addEventListener("click",(function(){document.pictureInPictureElement?document.exitPictureInPicture().catch((function(e){console.error(e)})):document.getElementById("localuser").requestPictureInPicture().catch((function(e){console.error(e)}))})),document.addEventListener("click",(function(e){e.target&&e.target.classList.contains("expand-remote-video")?Ye.maximiseStream(e):e.target&&e.target.classList.contains("mute-remote-mic")&&Ye.singleStreamToggleMute(e)})),document.getElementById("closerecording").addEventListener("click",(function(){Ye.toggleModal("recording-modal",!1)})),rt(n)}),[n]);var m=function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(t);case 2:n=e.sent,console.log(n),s(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){ct(),s(!1)};function g(e){var t=ft()("<input>");ft()("body").append(t),t.val(ft()(e).text()).select(),document.execCommand("copy"),t.remove()}return e?a.createElement(a.Fragment,null,a.createElement(mt,null),a.createElement(Ge,null,a.createElement(st,null),a.createElement("p",{id:"p2",hidden:!0}," https://intouch-videocall.herokuapp.com/",r),a.createElement("div",null,!i&&a.createElement("button",{className:"block",variant:"outline-info",onClick:function(){return m("media")},style:{width:"10%",marginRight:10,marginTop:5}},"Record Video"),"  ",!i&&a.createElement("button",{className:"block",variant:"outline-info",onClick:function(){return m("screen")},style:{width:"10%",marginRight:10,marginTop:5}},"Record Screen"),"   ",i&&a.createElement("button",{className:"block",variant:"outline-danger",onClick:function(){return d()},style:{width:"18%",marginRight:10,marginTop:5}},"Stop Recording"),"   ",a.createElement("button",{className:"block",onClick:g("#p2"),style:{width:"10%",marginRight:10,marginTop:5}},"Share Link"),"  ",a.createElement("button",{className:"block",variant:"danger",onClick:function(){return u("/signin")},style:{width:"10%",marginRight:10,marginTop:5}},"Leave Session"),"  ",!e&&a.createElement("button",{className:"block",variant:"danger",onClick:function(){return u("/")},style:{width:"19%",marginRight:10,marginTop:5,padding:"5px 5px"}},"Sign up for InTouch-Teams"),"  ")),a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"}),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 main",id:"master"},a.createElement("video",{className:"local-video mirror-mode",id:"localuser",volume:"0",autoPlay:!0,muted:!0}),a.createElement("div",{className:"row mt-2 mb-2",id:"videos",style:{marginRight:"300px"}})),a.createElement("div",{className:"col-md-3 chat-col d-print-none mb-2 bg-app-secondary",id:"chatarea",hidden:!0},a.createElement(P,null,a.createElement(U.a,{fluid:!0,className:"heighthundred"},a.createElement(V.a,{className:"heighthundred"},a.createElement(l.d,null,a.createElement(l.b,{exact:!0,path:"/:chatId"},a.createElement(_.a,{xs:24,md:24,className:"heighthundred"},a.createElement(Pe,null))))))))))):a.createElement(a.Fragment,null,a.createElement(mt,null),a.createElement(Ge,null,a.createElement(st,null),a.createElement("p",{id:"p1",hidden:!0}," https://intouch-videocall.herokuapp.com/",r),a.createElement("div",null,!i&&a.createElement("button",{className:"block",variant:"outline-info",onClick:function(){return m("media")},style:{width:"10%",marginRight:10,marginTop:5}},"Record Video"),"  ",!i&&a.createElement("button",{className:"block",variant:"outline-info",onClick:function(){return m("screen")},style:{width:"10%",marginRight:10,marginTop:5}},"Record Screen"),"   ",i&&a.createElement("button",{className:"block",variant:"outline-danger",onClick:function(){return d()},style:{width:"18%",marginRight:10,marginTop:5}},"Stop Recording"),"   ",a.createElement("button",{className:"block",onClick:g("#p1"),style:{width:"10%",marginRight:10,marginTop:5}},"Share Link"),"  ",a.createElement("button",{className:"block",variant:"danger",onClick:function(){return u("/signin")},style:{width:"10%",marginRight:10,marginTop:5}},"Leave Session"),"  ",!e&&a.createElement("button",{className:"block",variant:"danger",onClick:function(){return u("/")},style:{width:"19%",marginRight:10,marginTop:5,padding:"5px 5px"}},"Sign up for InTouch-Teams"),"  ")),a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"}),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 main",id:"master"},a.createElement("video",{className:"local-video mirror-mode",id:"localuser",volume:"0",autoPlay:!0,muted:!0}),a.createElement("div",{className:"row mt-2 mb-2",id:"videos",style:{marginRight:"300px"}})),a.createElement("div",{className:"col-md-3 chat-col d-print-none mb-2 bg-app-secondary",style:{backgroundColor:"#2b4a69"},id:"chatarea",hidden:!0},a.createElement("div",{className:"row",style:{width:"300px",textAlign:"center",fontSize:"19px"}},a.createElement("div",{className:"col-12 text-center h2 mb-3",style:{marginLeft:"25px"}},"CHAT")),a.createElement("div",{id:"chat-messages"}),a.createElement("div",{className:"row"},a.createElement("textarea",{id:"chat-input",style:{color:"black",maxWidth:"auto"},className:"form-control rounded-0 chat-box border-info",rows:"3",placeholder:"Get creative"}))))))},ht=n(247),gt=n(248),bt=n(259),vt=n(255),Et=function(e){Object(bt.a)(n,e);var t=Object(vt.a)(n);function n(e){var a;return Object(ht.a)(this,n),(a=t.call(this,e)).state={error:null,errorInfo:null},a}return Object(gt.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?r.a.createElement("div",null,r.a.createElement("h2",null,"Your valiant efforts seem to have broken the system. Never Worry. We'll send help right away"),r.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),r.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),n}(r.a.Component),kt=n(505),xt=n(249),yt=n.n(xt),wt=n(74),jt=n.n(wt),Ot=function(){var e=M().profile,t=Object(l.g)().push,n=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.signInWithPopup(t);case 3:if(n=e.sent,a=n.additionalUserInfo,r=n.user,!a.isNewUser){e.next=9;break}return e.next=9,N.ref("/profiles/".concat(r.uid)).set({name:r.displayName,createdAt:b.a.database.ServerValue.TIMESTAMP});case 9:W.a.success("Signed in",4e3),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),W.a.error(e.t0.message,4e3);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),c=function(){n(new b.a.auth.GoogleAuthProvider),e&&t("/")},o=function(e){var t=Object(a.useState)(0),n=Object(h.a)(t,2),o=n[0],i=n[1],l=Object(a.useRef)(null);return Object(a.useEffect)((function(){return o||i(yt()({el:l.current,color:"#2b4a69",color2:"#0xa6a3a3",size:.9})),function(){o&&o.destroy()}}),[o]),r.a.createElement("div",{ref:l},r.a.createElement(u.a,null,r.a.createElement(U.a,{className:"mt-page"},r.a.createElement(V.a,null,r.a.createElement(_.a,{xs:24,md:12,mdOffset:2},r.a.createElement(kt.a,null,r.a.createElement("div",{className:"text-align"},"Stay ",r.a.createElement("br",null)," InTouch ",r.a.createElement("br",null)," with ",r.a.createElement("img",{src:jt.a,style:{width:"100px",height:"100px",display:"inline-block"}})),r.a.createElement("div",{className:"mt-3"},r.a.createElement("button",{className:"block-edit",style:{width:"45%"},onClick:c},r.a.createElement(pe.a,{icon:"google"})," Sign up for InTouch"),r.a.createElement("button",{className:"block-edit",style:{width:"45%"},onClick:function(e){e.preventDefault(),window.open("/videocall","_self")}},"Start VideoCall as a Guest"))))))))};return r.a.createElement(o,null)},Nt=function(){return Math.random().toString(16).slice(2).substring(0,8)},Ct=n(261),St=n(250),Tt=n.n(St),It=function(){var e=a.useState(""),t=Object(h.a)(e,2),n=t[0],r=t[1],c=function(e){e.preventDefault();var t=function(){var e=Nt();return sessionStorage.setItem("username","Anonymous"),"".concat(window.location.origin,"/").concat(e.trim().replace(" ","_"),"_").concat(Nt())}();r(t)},o=function(e){var t=Object(a.useState)(0),r=Object(h.a)(t,2),o=r[0],i=r[1],l=Object(a.useRef)(null);return Object(a.useEffect)((function(){return o||i(Tt()({el:l.current,color:"#2b4a69",color2:"#0xa6a3a3"})),function(){o&&o.destroy()}}),[o]),a.createElement("div",{ref:l},a.createElement(Ct.a,{className:"block",style:{width:"20%",padding:"8px 8px",marginTop:"20%",marginLeft:"39%"},onClick:c},"Create New Room"),n&&W.a.success("Room has been created. Join in!",6e4)&&a.createElement("div",{className:"mt-2"},a.createElement("a",{href:n},a.createElement("button",{className:"block",style:{width:"20%",padding:"8px 8px",marginTop:"1%",marginLeft:"39%"}},"Join Room")),a.createElement("a",null,a.createElement("p",{id:"p1",hidden:!0},n),a.createElement("button",{className:"block",onClick:function(e){var t=ft()("<input>");ft()("body").append(t),t.val(ft()(e).text()).select(),document.execCommand("copy"),t.remove()}("#p1"),style:{width:"20%",padding:"8px 8px",marginTop:"1%",marginLeft:"39%"}},"Share Room Link"))))};return a.createElement(o,null)},Lt=n(520),Rt=n(516),At=n(515),Mt=n(498),Bt=n(514),Dt=n(503),Ft=Rt.a.Types.StringType,zt=Rt.a.Model({name:Ft().isRequired("Chat name is required"),description:Ft().isRequired("Description is required")}),Ut={name:"",description:""},Vt=function(){var e=te(),t=e.isOpen,n=e.open,c=e.close,o=Object(a.useState)(Ut),i=Object(h.a)(o,2),l=i[0],s=i[1],u=Object(a.useState)(!1),m=Object(h.a)(u,2),d=m[0],g=m[1],E=Object(a.useRef)(),k=Object(a.useCallback)((function(e){s(e)}),[]),x=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.current.check()){e.next=2;break}return e.abrupt("return");case 2:return g(!0),t=Object(v.a)(Object(v.a)({},l),{},{createdAt:b.a.database.ServerValue.TIMESTAMP,admins:Object(Ue.a)({},O.currentUser.uid,!0)}),e.prev=4,e.next=7,N.ref("rooms").push(t);case 7:W.a.info("".concat(l.name," has been created"),4e3),g(!1),s(Ut),c(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),g(!1),W.a.error(e.t0.message,4e3);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"mt-1"},r.a.createElement(Se.a,{title:"Create new room",placement:"top"},r.a.createElement("button",{className:"block-right",style:{padding:"9px 7px"},onClick:n},r.a.createElement(pe.a,{icon:"plus"}))),r.a.createElement(oe.a,{show:t,onHide:c},r.a.createElement(oe.a.Header,null,r.a.createElement(oe.a.Title,null,"New Chatroom")),r.a.createElement(oe.a.Body,null,r.a.createElement(At.a,{fluid:!0,onChange:k,formValue:l,model:zt,ref:E},r.a.createElement(Mt.a,null,r.a.createElement(Bt.a,null,"Room name"),r.a.createElement(Dt.a,{name:"name",placeholder:"Enter chat room name"})),r.a.createElement(Mt.a,null,r.a.createElement(Bt.a,null,"Description"),r.a.createElement(Dt.a,{componentClass:"textarea",rows:5,name:"description",placeholder:"Enter room description"})))),r.a.createElement(oe.a.Footer,null,r.a.createElement(J.a,{className:"block",onClick:x,disabled:d,style:{backgroundColor:"#2b4a69",color:"white"}},"Create new chat room"))))},_t=n(504),Ht=["initialValue","onSave","label","placeholder","emptyMsg","wrapperClassName"],Pt=function(e){var t=e.initialValue,n=e.onSave,c=e.label,o=void 0===c?null:c,i=e.placeholder,l=void 0===i?"Write your value":i,u=e.emptyMsg,m=void 0===u?"Input is empty":u,d=e.wrapperClassName,g=void 0===d?"":d,b=Object(s.a)(e,Ht),v=Object(a.useState)(t),E=Object(h.a)(v,2),k=E[0],x=E[1],y=Object(a.useState)(!1),w=Object(h.a)(y,2),j=w[0],O=w[1],N=Object(a.useCallback)((function(e){x(e)}),[]),C=Object(a.useCallback)((function(){O((function(e){return!e})),x(t)}),[t]),S=function(){var e=Object(p.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(a=k.trim())&&W.a.info(m,4e3),a===t){e.next=5;break}return e.next=5,n(a);case 5:O(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:g},o,r.a.createElement(Ne.a,{className:"w-e"},r.a.createElement(he.a,Object.assign({},b,{disabled:!j,placeholder:l,onChange:N,value:k})),r.a.createElement(Ne.a.Button,{onClick:C},r.a.createElement(pe.a,{icon:j?"close":"edit2"})),j&&r.a.createElement(Ne.a.Button,{onClick:S},r.a.createElement(pe.a,{icon:"check"}))))},qt=n(509),Gt=function(){var e=Object(a.useState)({"google.com":O.currentUser.providerData.some((function(e){return"google.com"===e.providerId}))}),t=Object(h.a)(e,2),n=t[0],c=t[1],o=function(e,t){c((function(n){return Object(v.a)(Object(v.a)({},n),{},Object(Ue.a)({},e,t))}))},i=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1!==O.currentUser.providerData.length){e.next=3;break}throw new Error("You cannot disconnect from ".concat(t));case 3:return e.next=5,O.currentUser.unlink(t);case 5:o(t,!1),W.a.info("Disconnected from ".concat(t),4e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),W.a.error(e.t0.message,4e3);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.currentUser.linkWithPopup(t);case 3:W.a.info("Linked to ".concat(t.providerId," "),4e3),o(t.providerId,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),W.a.error(e.t0.message,4e3);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,n["google.com"]&&r.a.createElement(qt.a,{closable:!0,color:"green",onClose:function(){i("google.com")}},r.a.createElement(pe.a,{icon:"google"})," Connected"),r.a.createElement("div",{className:"mt-2"},!n["google.com"]&&r.a.createElement(J.a,{className:"block-socials",onClick:function(){l(new b.a.auth.GoogleAuthProvider)}},r.a.createElement(pe.a,{icon:"google"})," Link to Google")))},Wt=n(252),Jt=n.n(Wt),Kt=["image/png","image/jpeg","image/pjpeg"],Yt=function(e){return new Promise((function(t,n){e.toBlob((function(e){e?t(e):n(new Error("File process error"))}))}))},Zt=function(){var e=te(),t=e.isOpen,n=e.open,c=e.close,o=M().profile,i=Object(a.useState)(null),l=Object(h.a)(i,2),s=l[0],u=l[1],m=Object(a.useState)(!1),d=Object(h.a)(m,2),g=d[0],b=d[1],v=Object(a.useRef)(),E=function(){var e=Object(p.a)(f.a.mark((function e(){var t,n,a,r,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.current.getImageScaledToCanvas(),b(!0),e.prev=2,e.next=5,Yt(t);case 5:return n=e.sent,a=C.ref("/profile/".concat(o.uid)).child("avatar"),e.next=9,a.put(n,{cacheControl:"public, max-age = ".concat(259200)});case 9:return r=e.sent,e.next=12,r.ref.getDownloadURL();case 12:return c=e.sent,e.next=15,y(o.uid,"avatar",c,N);case 15:return i=e.sent,e.next=18,N.ref().update(i);case 18:b(!1),W.a.info("Avatar has been downloaded",4e3),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),b(!1),W.a.error(e.t0.message,4e3);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"mt-3 text-center"},r.a.createElement(Q,{src:o.avatar,name:o.name,className:"widthtwo heighttwo bigsize font-huge"}),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"avatar-upload",className:"displayblock cursor-pointer padded-black text-black-sharp",style:{display:"block"}},"Select New Avatar",r.a.createElement("input",{id:"avatar-upload",type:"file",className:"display1",accept:".png, .jpeg, .jpg",onChange:function(e){var t=e.target.files;if(1===t.length){var a=t[0];!function(e){return Kt.includes(e.type)}(a)?W.a.warning("Wrong file type ".concat(a.type),4e3):(u(a),n())}}})),r.a.createElement(oe.a,{show:t,onHide:c},r.a.createElement(oe.a.Header,null,r.a.createElement(oe.a.Title,null,"Adjust and upload new avatar")),r.a.createElement(oe.a.Body,null,r.a.createElement("div",{className:"displayflex justify-content-center align-items-center heighthundred"},s&&r.a.createElement(Jt.a,{ref:v,image:s,width:200,height:200,border:10,borderRadius:100,rotate:0}))),r.a.createElement(oe.a.Footer,null,r.a.createElement(J.a,{appearance:"ghost",block:!0,onClick:E,disabled:g},"Upload new avatar")))))},Qt=function(e){var t=e.onSignOut,n=M().profile,a=function(){var e=Object(p.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(n.uid,"name",t,N);case 3:return a=e.sent,e.next=6,N.ref().update(a);case 6:W.a.success("Nickname has been updated",4e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),W.a.error(e.t0.message,4e3);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_t.a.Body,null,r.a.createElement("h3",null,"Hey, ",n.name),r.a.createElement(Gt,{className:"y-m"}),r.a.createElement(Lt.a,null),r.a.createElement(Pt,{name:"nickname",className:"w-e",initialValue:n.name,onSave:a,label:r.a.createElement("h5",{className:"mb-2"},"Nickname")}),r.a.createElement(Zt,null)),r.a.createElement(_t.a.Footer,null,r.a.createElement(J.a,{className:"block-edit",style:{width:"30%",marginRight:"35%"},onClick:t},"Sign Out")))},Xt=function(){var e=te(),t=e.isOpen,n=e.close,c=e.open,o=ne("(max-width: 992px)"),i=Object(a.useCallback)((function(){N.ref("status/".concat(O.currentUser.uid)).set(L).then((function(){O.signOut(),W.a.info("Signed out",4e3),n()})).catch((function(e){W.a.error(e.message,4e3)}))}),[n]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"block",style:{paddingTop:"8px",paddingBottom:"9.5px"},onClick:c},"PROFILE"),r.a.createElement(_t.a,{full:o,show:t,onHide:n,placement:"left"},r.a.createElement(Qt,{onSignOut:i})))},$t=n(501),en=function(e){var t=e.room,n=t.createdAt,a=t.name,c=t.lastMessage;return r.a.createElement("div",null,r.a.createElement("div",{className:"displayflex justify-content-between align-items-center"},r.a.createElement("h5",{className:"text-disappear"},a),r.a.createElement(K.a,{datetime:c?new Date(c.createdAt):new Date(n),className:"font-normal text-white-45"})),r.a.createElement("div",{className:"displayflex align-items-center text-white-70"},c?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"displayflex align-items-center"},r.a.createElement(Q,{src:c.author.avatar,name:c.author.name,size:"sm"})),r.a.createElement("div",{className:"text-disappear-2 ml-2"},r.a.createElement("div",{className:"italic"},c.author.name),r.a.createElement("span",null,c.text||c.file.name))):r.a.createElement("span",{className:"text-white-45"},"No messages yet")))},tn=function(e){var t=e.aboveElementHeight,n=q(),a=Object(l.h)();return r.a.createElement($t.a,{appearance:"subtle",vertical:!0,reversed:!0,className:"overflow-y-scroll scroll",style:{background:"#172855",height:"calc(100% - ".concat(t,"px)"),marginLeft:"7px",marginRight:"5px"},activeKey:a.pathname},!n&&r.a.createElement(m.a,{center:!0,vertical:!0,content:"Loading",speed:"slow",size:"md"}),n&&n.length>0&&n.map((function(e){return r.a.createElement($t.a.Item,{key:e.id,componentClass:i.b,to:"/chat/".concat(e.id),eventKey:"/chat/".concat(e.id)},r.a.createElement(en,{room:e,className:"text-hover",style:{margin:"0px"}}),r.a.createElement("br",null),r.a.createElement("hr",{className:"bg-4"}))})))},nn=function(){var e=Object(a.useRef)(),t=Object(a.useState)(null),n=Object(h.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){e.current&&o(e.current.scrollHeight)}),[e]),r.a.createElement("div",{className:"heighthundred pt-2 bg-2"},r.a.createElement("div",{ref:e},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"column"},r.a.createElement(Xt,null)),r.a.createElement("div",{class:"column"},r.a.createElement(Vt,null))),r.a.createElement(Lt.a,null,r.a.createElement("div",{className:"jointhefun"},"Join the Fun"))),r.a.createElement(tn,{aboveElementHeight:c}))},an=n(508),rn=Object(a.memo)((function(){var e=te(),t=e.open,n=e.close,a=e.isOpen,c=Object(l.i)(),o=c.chatId,i=(c.roomsRef,ne("(max-width: 992px)")),s=de((function(e){return e.name})),u=de((function(e){return e.description})),m=function(e,t){N.ref("/rooms/".concat(o)).child(e).set(t).then((function(){W.a.success("Successfully updated",4e3)})).catch((function(e){W.a.error(e.message,4e3)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"block-edit",style:{zIndex:"3",marginLeft:"10px",padding:"12.5px 8px",fontSize:"15px"},onClick:t},r.a.createElement(pe.a,{icon:"cogs"})," EDIT ROOM"),r.a.createElement(_t.a,{full:i,show:a,onHide:n,placement:"right",style:{width:"300px"}},r.a.createElement(_t.a.Header,null,r.a.createElement(_t.a.Title,null,"Room Details")),r.a.createElement(_t.a.Body,null,r.a.createElement(Pt,{initialValue:s,onSave:function(e){m("name",e)},label:r.a.createElement("h5",{className:"mb-2"},"Name"),emptyMsg:"Name can not be empty"}),r.a.createElement(Pt,{componentClass:"textarea",row:5,initialValue:u,onSave:function(e){m("description",e)},emptyMsg:"Description can not be empty",wrapperClassName:"mt-3"})),r.a.createElement(_t.a.Footer,null,r.a.createElement(J.a,{block:!0,onClick:n}))))})),cn=Ae.a.div(ut||(ut=Object(Re.a)(["\n.btn {\n  font-size: 1em;\n  line-height: 1em;\n  letter-spacing: 0.04em;\n  display: inline-block;\n  margin-left: 6px;\n  color: white;\n\n  &--svg {\n      position: relative;\n      height: 42px;\n      width: 190px;\n      overflow: hidden;\n      border-radius: 5px;\n      \n\n\n      &:hover {\n          .btn--svg__circle {\n              circle {\n                  -webkit-transform: scale(0);\n                  -moz-transform: scale(0);\n                  -ms-transform: scale(0);\n                  transform: scale(0);\n              }\n          }\n\n          .btn--svg__label {\n\n              color:  #FFF;\n          }\n\n          .btn--svg__border--left,\n          .btn--svg__border--right {\n              path {\n                  stroke-dasharray: 61.8204345703125 61.8204345703125;\n                  stroke-dashoffset: 0;\n                  -webkit-transition-delay: 0.25s;\n                  -webkit-transition-duration: 0.5s;\n                  -webkit-transition-timing-function: ease-in-out;\n                  -webkit-transition-property: stroke-dashoffset;\n                  -moz-transition-delay: 0.25s;\n                  -moz-transition-duration: 0.5s;\n                  -moz-transition-timing-function: ease-in-out;\n                  -moz-transition-property: stroke-dashoffset;\n                  -ms-transition-delay: 0.25s;\n                  -ms-transition-duration: 0.5s;\n                  -ms-transition-timing-function: ease-in-out;\n                  -ms-transition-property: stroke-dashoffset;\n                  transition-delay: 0.25s;\n                  transition-duration: 0.5s;\n                  transition-timing-function: ease-in-out;\n                  transition-property: stroke-dashoffset;\n              }\n          }\n      }\n\n      &__label {\n          -webkit-font-smoothing: antialiased;\n          font-family: sans-serif;\n          font-weight: bold;\n          text-align:center;\n          color: white;\n          z-index: 3;\n          width: 100%;\n          -webkit-transition: color 0.5s ease-in-out;\n          -moz-transition: color 0.5s ease-in-out;\n          -ms-transition: color 0.5s ease-in-out;\n          transition: color 0.5s ease-in-out;\n      }\n\n      &__circle {\n          circle {\n              -webkit-transition: transform 0.5s ease-in-out;\n              -webkit-transform: scale(1.1);\n              -webkit-transform-origin: 50% 50%;\n              -moz-transition: transform 0.5s ease-in-out;\n              -moz-transform: scale(1.1);\n              -moz-transform-origin: 50% 50%;\n              -ms-transition: transform 0.5s ease-in-out;\n              -ms-transform: scale(1.1);\n              -ms-transform-origin: 50% 50%;\n              transition: transform 0.5s ease-in-out;\n              transform: scale(1.1);\n              transform-origin: 50% 50%;\n          }\n      }\n\n      &__border {\n\n          &--left,\n          &--right {\n              path {\n                  stroke-dasharray: 61.8204345703125 61.8204345703125;\n                  -webkit-transition-duration: 0s;\n                  -webkit-transition-timing-function: ease-in-out;\n                  -webkit-transition-property: stroke-dashoffset;\n                  -webkit-transition-delay: 0.5s;\n                  -moz-transition-duration: 0s;\n                  -moz-transition-timing-function: ease-in-out;\n                  -moz-transition-property: stroke-dashoffset;\n                  -moz-transition-delay: 0.5s;\n                  -ms-transition-duration: 0s;\n                  -ms-transition-timing-function: ease-in-out;\n                  -ms-transition-property: stroke-dashoffset;\n                  -ms-transition-delay: 0.5s;\n                  transition-duration: 0s;\n                  transition-timing-function: ease-in-out;\n                  transition-property: stroke-dashoffset;\n                  transition-delay: 0.5s;\n              }\n          }\n\n          &--left {\n              path {\n                  stroke-dashoffset: -61.8204345703125;\n              }\n          }\n\n          &--right {\n              path {\n                  stroke-dashoffset: 61.8204345703125;\n              }\n          }\n      }\n\n      svg,\n      &__label {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          -webkit-transform: translate(-50%, -50%);\n          -webkit-transform-origin: 50% 50%;\n          -moz-transform: translate(-50%, -50%);\n          -moz-transform-origin: 50% 50%;\n          -ms-transform: translate(-50%, -50%);\n          -ms-transform-origin: 50% 50%;\n          transform: translate(-50%, -50%);\n          transform-origin: 50% 50%;\n      }\n  }\n}\n\n// Utils\n.c-white {\n  color:  #FFF\n}\n\n.trailer {\n  margin-bottom: 40px;\n  \n  &--nano {\n      margin-bottom: 10px;\n  }\n}\n\na {\n  position: relative;\n  text-decoration: none;\n  color: red;\n  \n  &:after {\n      content: '';\n      height: 1px;\n      bottom: -4px;\n      position: absolute;\n      left: 5%;\n      right: 95%;\n      background: red;\n      transition: right 0.25s ease-in-out;\n  }\n  \n  &:hover:after {\n      right: 5%;\n  }\n}\n\n.teasing-1,\n.heading-2 {\n  font-family: sans-serif;\n  letter-spacing: 0.04em;\n  -webkit-font-smoothing: antialiased;\n}\n\n.teasing-1 {\n  font-size: 14px;\n  line-height: 14px;\n}\n\n.heading-2 {\n  font-weight: bold;\n  font-size: 20px;\n  line-height: 20px;\n  text-transform: uppercase;\n}\n"]))),on=Object(a.memo)((function(){var e=Object(l.i)(),t=e.chatId,n=e.messageId,a={};return a["/messages/".concat(n)]="https://videochat-teams.herokuapp.com/?room=room_".concat(t),a["/rooms/".concat(t,"/lastMessage")]="https://videochat-teams.herokuapp.com/?room=room_".concat(t),r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.a,{title:"Start a Video Call with your room members",placement:"bottom"},r.a.createElement(cn,Object(Ue.a)({style:{marginBottom:"-62px"},onClick:function(e){e.preventDefault(),window.open("/".concat(t),"_blank"),W.a.info("Videocall has started. Let others know",6e4)}},"style",{marginRight:"16px",marginBottom:"-60px"}),r.a.createElement("a",{class:"btn btn--svg js-animated-button"},r.a.createElement("span",{class:"btn--svg__label"},"VIDEO CALL"),r.a.createElement("svg",{class:"btn--svg__circle",width:"190",x:"0px",y:"0px",viewBox:"0 0 60 60","enable-background":"new 0 0 60 60"},r.a.createElement("circle",{class:"js-discover-circle",fill:"#2b4a69",opacity:"0.7",cx:"30",cy:"30",r:"28.7"})),r.a.createElement("svg",{class:"btn--svg__border",x:"0px",y:"0px",preserveaspectratio:"none",viewBox:"2 29.3 56.9 13.4","enable-background":"new 2 29.3 56.9 13.4",width:"190"},r.a.createElement("g",{class:"btn--svg__border--left js-discover-left-border",id:"Calque_2"},r.a.createElement("path",{fill:"none",stroke:"#464EB8","stroke-width":"0.5","stroke-miterlimit":"1",d:"M30.4,41.9H9c0,0-6.2-0.3-6.2-5.9S9,30.1,9,30.1h21.4"})),r.a.createElement("g",{class:"btn--svg__border--right js-discover-right-border",id:"Calque_3"},r.a.createElement("path",{fill:"none",stroke:" #464EB8","stroke-width":"0.5","stroke-miterlimit":"1",d:"M30.4,41.9h21.5c0,0,6.1-0.4,6.1-5.9s-6-5.9-6-5.9H30.4"})))))))})),ln=Object(a.memo)((function(){de((function(e){return e.name}));var e=de((function(e){return e.isAdmin})),t=ne("(max-width: 992px)");return r.a.createElement("div",null,r.a.createElement("div",{className:"displayflex justify-content-end align-items-center"},r.a.createElement("h4",{className:"text-disappear-2 displayflex align-items-center"},r.a.createElement(pe.a,{componentClass:i.b,to:"/",icon:"arrow-circle-left",size:"2x",className:t?"displayinline p-0 mr-2 text-blue link-unstyled":"display1"})),r.a.createElement(on,null)),r.a.createElement("div",{className:"displayflex justify-content-between align-items-center shiftup"},r.a.createElement("img",{alt:"Teams",src:jt.a,style:{width:"50px",height:"50px",alignItems:"center",marginBottom:"0px"}}),r.a.createElement(an.a,{className:"cover bg",style:{marginLeft:"6px"}},e&&r.a.createElement(rn,null))))})),sn=function(){var e=Object(l.i)().chatId,t=q(),n=M(),a=n.profile,c=(n.isLoading,Object(l.g)().push);if(!t)return r.a.createElement(m.a,{center:!0,vertical:!0,size:"md",content:"Loading",speed:"slow"});var o=t.find((function(t){return t.id===e}));if(!a)return r.a.createElement("h5",{className:"mt-page"},"Chat is not available in Guest mode ",r.a.createElement("br",null),"Login to access all features ",r.a.createElement("br",null),r.a.createElement("button",{className:"block-nav-2",variant:"danger",onClick:function(){return c("/signin")},style:{width:"68%",marginTop:"15px",marginRight:"30px"}}," Authenticate "));if(!o)return r.a.createElement("h5",{className:"text-right mt-page"},"Join a room to chat");var i=o.name,s=o.description,u=k(o.admins),d=u.includes(O.currentUser.uid),f={name:i,description:s,admins:u,isAdmin:d};return r.a.createElement(me,{data:f},r.a.createElement("div",{className:"chatnav"},r.a.createElement(ln,null)),r.a.createElement("div",{className:"chatarea bg"},r.a.createElement(je,null)),r.a.createElement("div",{className:"chatfooter bg"},r.a.createElement(He,null)))},un=function(){var e=ne("(min-width:992px)"),t=Object(l.j)().isExact,n=e||t;return r.a.createElement(P,null,r.a.createElement(U.a,{fluid:!0,className:"heighthundred"},r.a.createElement(V.a,{className:"heighthundred"},n&&r.a.createElement(_.a,{xs:17,md:8,className:"heighthundred"},r.a.createElement(nn,null)),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/chat/:chatId"},r.a.createElement(_.a,{xs:24,md:16,className:"heighthundred"},r.a.createElement(sn,null))),r.a.createElement(l.b,null,e&&r.a.createElement(_.a,{xs:24,md:16,className:"heighthundred bg"},r.a.createElement("img",{src:jt.a,style:{width:"50px",height:"50px",marginTop:"18px",alignItems:"center"}}),r.a.createElement("div",{style:{marginBottom:"25px"}},r.a.createElement("h2",null,"Stay.InTouch"),r.a.createElement("h6",{class:"rainbow-text"},r.a.createElement("br",null),"We hope you brought pizza"))))))))};var mn=function(){return r.a.createElement(Et,null,r.a.createElement(A,null,r.a.createElement(l.d,null,r.a.createElement(D,{exact:!0,path:"/signin"},r.a.createElement(Ot,null)),r.a.createElement(z,{exact:!0,path:"/chat/:chatId"},r.a.createElement(un,null)),r.a.createElement(l.b,{exact:!0,path:"/videocall"},r.a.createElement(It,null)),r.a.createElement(l.b,{exact:!0,path:"/:chatId"},r.a.createElement(pt,null)),r.a.createElement(z,{exact:!0,path:"/"},r.a.createElement(un,null)))))};o.a.render(r.a.createElement(i.a,null,r.a.createElement(mn,null)),document.getElementById("root"))},74:function(e,t,n){e.exports=n.p+"static/media/teams.80ccd59e.svg"}},[[263,1,2]]]);
//# sourceMappingURL=main.6452b862.chunk.js.map